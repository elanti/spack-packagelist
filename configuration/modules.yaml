modules:
  enable : ['tcl', 'lmod']
  prefix_inspections:
    bin:
      - PATH
    bin64:
      - PATH
    man:
      - MANPATH
    lib:
      - LD_LIBRARY_PATH
    lib64:
      - LD_LIBRARY_PATH
    lib/pkgconfig:
      - PKG_CONFIG_PATH
    lib64/pkgconfig:
      - PKG_CONFIG_PATH
    '':
      - CMAKE_PREFIX_PATH
  tcl:
  # Intel tcl module is needed to add compiler in spack.<release>.compilers
    intel:
      environment:
        set:
          CC: icc
          CXX: icpc
          FC: ifort
          F90: ifort
          F77: ifort
          ICCCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
          ICPCCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
          IFORTCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
        prepend_path:
          PATH: '/ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/bin/intel64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/gcc-4.9.3-2gys3tu6lq35ge6woeixfo4tfz5nnvzn/bin:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/binutils-2.26-cwd2djeg3mu6sngjnb5uulbhfszvr6su/bin'
          LD_LIBRARY_PATH: '/ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/lib/intel64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/gcc-4.9.3-2gys3tu6lq35ge6woeixfo4tfz5nnvzn/lib64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/binutils-2.26-cwd2djeg3mu6sngjnb5uulbhfszvr6su/lib'
          MANPATH: /ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/man/common
  lmod:
    whitelist: [
      'gcc',
      'llvm',
      'intel',
      'cmake',
      'autoconf',
      'automake',
      'libtool',
      'm4',
      'cuda']
    blacklist: [
      '%gcc@4.4.7',
      'autoconf',
      'automake',
      'libtool',
      'm4']
    core_compilers: ['gcc@4.4.7']
    hierarchical_scheme: ['lapack']
    all:
      suffixes:
        +mpi: mpi
        +openmp: openmp
    cuda:
      environment:
        set:
          CUDA_ROOT: /ssoft/spack/lafnetscha/opt/spack/x86_E5v2_Mellanox_GPU/gcc-4.4.7/cuda-7.5.18-ob4oee2pngue3l7ygnwiy7wme7rlgrew
          CUDA_LIBRARY: /ssoft/spack/lafnetscha/opt/spack/x86_E5v2_Mellanox_GPU/gcc-4.4.7/cuda-7.5.18-ob4oee2pngue3l7ygnwiy7wme7rlgrew/lib64
          CUDA_INCLUDE: /ssoft/spack/lafnetscha/opt/spack/x86_E5v2_Mellanox_GPU/gcc-4.4.7/cuda-7.5.18-ob4oee2pngue3l7ygnwiy7wme7rlgrew/include
    gcc:
      environment:
        set:
         CC: gcc
         CXX: g++
         FC: gfortran
         F90: gfortran
         F77: gfortran
    llvm:
      environment:
        set:
          CC: clang
    openmpi:
      environment:
        set:
          SLURM_MPI_TYPE: pmi2
          OMPI_MCA_btl_openib_warn_default_gid_prefix: '0'
    intel:
      environment:
        set:
          CC: icc
          CXX: icpc
          FC: ifort
          F90: ifort
          F77: ifort
          ICCCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
          ICPCCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
          IFORTCFG: /ssoft/spack/external/intel/config/2016/compilers_and_libraries_2016.3.210/icl.cfg
        prepend_path:
          PATH: '/ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/bin/intel64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/gcc-4.9.3-2gys3tu6lq35ge6woeixfo4tfz5nnvzn/bin:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/binutils-2.26-cwd2djeg3mu6sngjnb5uulbhfszvr6su/bin'
          LD_LIBRARY_PATH: '/ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/lib/intel64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/gcc-4.9.3-2gys3tu6lq35ge6woeixfo4tfz5nnvzn/lib64:/ssoft/spack/lafnetscha/opt/spack/x86_E5v1_IntelIB/gcc-4.4.7/binutils-2.26-cwd2djeg3mu6sngjnb5uulbhfszvr6su/lib'
          MANPATH: /ssoft/spack/external/intel/2016/compilers_and_libraries_2016/linux/man/common
